{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Number of Internet Speed Tests per Continent",
    "fontSize": 25
  },
  "width": 800,
  "height": 400,
  "description": "Number of Internet Speed tests per Continent",
  "data": {
    "url": "https://raw.githubusercontent.com/johnstonw/johnstonw.github.io/main/numberoftestsCLEANED.csv"
  },
  "encoding": {
    "x": {"field": "Continent", "type": "nominal", "axis": {"labelAngle": 0}},
    "y": {"field": "Tests", "type": "quantitative", "title" : "Number of Tests"},
    "color": {
      "field": "Continent",
      "type": "nominal",
      "scale": {
        "domain": ["Americas", "Europe", "Africa", "Asia", "Oceania"],
        "range": ["#984ea3", "#ff7f00", "#a6cee3", "#377eb8", "#a65628"]
      },
      "legend": {
        "orient": "none",
        "legendX": 30,
        "legendY": 30,
        "fillColor": "white",
        "strokeColor": "black",
        "padding": 10,
        "labelFontSize": 13,
        "titleFontSize": 15
      }
    },
    "tooltip": [
      {"field": "Country", "type": "nominal"},
      {
        "field": "Tests",
        "type": "quantitative",
        "title": "Number of Tests Taken",
        "format": ","
      },
      {
        "field": "dSpeed",
        "type": "quantitative",
        "title": "Avg Download Speed (kB/s)",
        "format": ","
      },
      {
        "field": "uSpeed",
        "type": "quantitative",
        "title": "Avg Upload Speed (kB/s)",
        "format": ","
      },
      {
        "field": "avgPop",
        "type": "quantitative",
        "title": "Population",
        "format": ","
      }
    ]
  },

  "layer": [{
  "mark": {"type": "bar"}
  },
  {
      "mark": {
      "type": "text",
       "baseline": "middle",
        "align": "center",
        "fontSize": 11.5,
        "fontStyle": "italic"
      },
      "encoding": {
        "text": {"field": "Country", "type": "nominal"},
        "color": {"value": "white"},
        "opacity": {
          "condition": {
            "test": "datum['Country'] == 'India' || datum['Country'] == 'China' || datum['Country'] == 'Australia'|| datum['Country'] == 'United Kingdom' || datum['Country'] == 'Italy' ||  datum['Country'] == 'United States of America'",
            "value": 1
          },
          "value": 0
        }
      }
  }
]
}